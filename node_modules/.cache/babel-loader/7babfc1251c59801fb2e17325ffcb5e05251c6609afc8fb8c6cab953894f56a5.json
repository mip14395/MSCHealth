{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import Popup from\"reactjs-popup\";import\"reactjs-popup/dist/index.css\";import\"./DoctorCard.css\";import AppointmentForm from\"../AppointmentForm/AppointmentForm\";import{v4 as uuidv4}from\"uuid\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const DoctorCard=_ref=>{let{name,speciality,experience,ratings}=_ref;const[showModal,setShowModal]=useState(false);const[appointments,setAppointments]=useState([]);const storedEmail=sessionStorage.getItem(\"email\");useEffect(()=>{fetch(\"http://localhost:3001/appointments\").then(res=>res.json()).then(data=>{const doctorAppointments=data.filter(appointment=>appointment.doctorName===name);setAppointments(doctorAppointments);}).catch(err=>console.error(\"Error fetching appointments:\",err));},[name]);const handleFormSubmit=appointmentData=>{const newAppointment={id:uuidv4(),doctorName:name,doctorSpeciality:speciality,...appointmentData,email:storedEmail};fetch(\"http://localhost:3001/appointments\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(newAppointment)}).then(res=>res.json()).then(()=>{setAppointments([...appointments,newAppointment]);setShowModal(false);}).catch(err=>console.log(err));};const handleCancel=appointmentId=>{fetch(`http://localhost:3001/appointments/${appointmentId}`,{method:\"DELETE\"}).then(()=>{setAppointments(appointments.filter(a=>a.id!==appointmentId));sessionStorage.removeItem(\"userAppointment\");window.location.reload();}).catch(err=>console.log(err));};return/*#__PURE__*/_jsxs(\"div\",{className:\"doctor-card-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"doctor-card-details-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"doctor-card-profile-image-container\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"46\",height:\"46\",fill:\"currentColor\",className:\"bi bi-person-fill\",viewBox:\"0 0 16 16\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"doctor-card-details\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"doctor-card-detail-name\",children:name}),/*#__PURE__*/_jsx(\"div\",{className:\"doctor-card-detail-speciality\",children:speciality}),/*#__PURE__*/_jsxs(\"div\",{className:\"doctor-card-detail-experience\",children:[experience,\" years experience\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"doctor-card-detail-consultationfees\",children:[\"Ratings: \",ratings]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"doctor-card-options-container\",children:/*#__PURE__*/_jsx(Popup,{trigger:/*#__PURE__*/_jsx(\"button\",{className:`book-appointment-btn ${appointments.length>0?\"cancel-appointment\":\"\"}`,children:appointments.length>0?\"Cancel Appointment\":\"Book Appointment\"}),modal:true,open:showModal,onClose:()=>setShowModal(false),children:close=>/*#__PURE__*/_jsxs(\"div\",{className:\"doctorbg\",style:{overflow:\"scroll\"},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"doctor-card-profile-image-container\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"46\",height:\"46\",fill:\"currentColor\",className:\"bi bi-person-fill\",viewBox:\"0 0 16 16\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"doctor-card-details\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"doctor-card-detail-name\",children:name}),/*#__PURE__*/_jsx(\"div\",{className:\"doctor-card-detail-speciality\",children:speciality}),/*#__PURE__*/_jsxs(\"div\",{className:\"doctor-card-detail-experience\",children:[experience,\" years experience\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"doctor-card-detail-consultationfees\",children:[\"Ratings: \",ratings]})]})]}),appointments.length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{style:{textAlign:\"center\"},children:\"Appointment Booked!\"}),appointments.map(appointment=>/*#__PURE__*/_jsxs(\"div\",{className:\"bookedInfo\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Name: \",appointment.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Phone Number: \",appointment.phoneNumber]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Date of Appointment: \",appointment.date]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Time Slot: \",appointment.selectedSlot]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleCancel(appointment.id),children:\"Cancel Appointment\"})]},appointment.id))]}):/*#__PURE__*/_jsx(AppointmentForm,{doctorName:name,doctorSpeciality:speciality,onSubmit:handleFormSubmit})]})})})]});};export default DoctorCard;","map":{"version":3,"names":["React","useEffect","useState","Popup","AppointmentForm","v4","uuidv4","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","DoctorCard","_ref","name","speciality","experience","ratings","showModal","setShowModal","appointments","setAppointments","storedEmail","sessionStorage","getItem","fetch","then","res","json","data","doctorAppointments","filter","appointment","doctorName","catch","err","console","error","handleFormSubmit","appointmentData","newAppointment","id","doctorSpeciality","email","method","headers","body","JSON","stringify","log","handleCancel","appointmentId","a","removeItem","window","location","reload","className","children","xmlns","width","height","fill","viewBox","d","trigger","length","modal","open","onClose","close","style","overflow","textAlign","map","phoneNumber","date","selectedSlot","onClick","onSubmit"],"sources":["E:/STUDY/Code/test_app/src/Components/Appointment/DoctorCard/DoctorCard.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Popup from \"reactjs-popup\";\r\nimport \"reactjs-popup/dist/index.css\";\r\nimport \"./DoctorCard.css\";\r\nimport AppointmentForm from \"../AppointmentForm/AppointmentForm\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\n\r\nconst DoctorCard = ({ name, speciality, experience, ratings }) => {\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [appointments, setAppointments] = useState([]);\r\n  const storedEmail = sessionStorage.getItem(\"email\");\r\n\r\n  useEffect(() => {\r\n    fetch(\"http://localhost:3001/appointments\")\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        const doctorAppointments = data.filter(\r\n          (appointment) => appointment.doctorName === name\r\n        );\r\n        setAppointments(doctorAppointments);\r\n      })\r\n      .catch((err) => console.error(\"Error fetching appointments:\", err));\r\n  }, [name]);\r\n\r\n  const handleFormSubmit = (appointmentData) => {\r\n    const newAppointment = {\r\n      id: uuidv4(),\r\n      doctorName: name,\r\n      doctorSpeciality: speciality,\r\n      ...appointmentData,\r\n      email: storedEmail,\r\n    };\r\n\r\n    fetch(\"http://localhost:3001/appointments\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(newAppointment),\r\n    })\r\n      .then((res) => res.json())\r\n      .then(() => {\r\n        setAppointments([...appointments, newAppointment]);\r\n        setShowModal(false);\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  const handleCancel = (appointmentId) => {\r\n    fetch(`http://localhost:3001/appointments/${appointmentId}`, {\r\n      method: \"DELETE\",\r\n    })\r\n      .then(() => {\r\n        setAppointments(appointments.filter((a) => a.id !== appointmentId));\r\n        sessionStorage.removeItem(\"userAppointment\");\r\n        window.location.reload();\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  return (\r\n    <div className=\"doctor-card-container\">\r\n      <div className=\"doctor-card-details-container\">\r\n        <div className=\"doctor-card-profile-image-container\">\r\n          <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            width=\"46\"\r\n            height=\"46\"\r\n            fill=\"currentColor\"\r\n            className=\"bi bi-person-fill\"\r\n            viewBox=\"0 0 16 16\"\r\n          >\r\n            <path d=\"M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z\" />\r\n          </svg>\r\n        </div>\r\n        <div className=\"doctor-card-details\">\r\n          <div className=\"doctor-card-detail-name\">{name}</div>\r\n          <div className=\"doctor-card-detail-speciality\">{speciality}</div>\r\n          <div className=\"doctor-card-detail-experience\">\r\n            {experience} years experience\r\n          </div>\r\n          <div className=\"doctor-card-detail-consultationfees\">\r\n            Ratings: {ratings}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"doctor-card-options-container\">\r\n        <Popup\r\n          trigger={\r\n            <button\r\n              className={`book-appointment-btn ${\r\n                appointments.length > 0 ? \"cancel-appointment\" : \"\"\r\n              }`}\r\n            >\r\n              {appointments.length > 0\r\n                ? \"Cancel Appointment\"\r\n                : \"Book Appointment\"}\r\n            </button>\r\n          }\r\n          modal\r\n          open={showModal}\r\n          onClose={() => setShowModal(false)}\r\n        >\r\n          {(close) => (\r\n            <div className=\"doctorbg\" style={{ overflow: \"scroll\" }}>\r\n              <div>\r\n                <div className=\"doctor-card-profile-image-container\">\r\n                  <svg\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    width=\"46\"\r\n                    height=\"46\"\r\n                    fill=\"currentColor\"\r\n                    className=\"bi bi-person-fill\"\r\n                    viewBox=\"0 0 16 16\"\r\n                  >\r\n                    <path d=\"M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z\" />\r\n                  </svg>\r\n                </div>\r\n                <div className=\"doctor-card-details\">\r\n                  <div className=\"doctor-card-detail-name\">{name}</div>\r\n                  <div className=\"doctor-card-detail-speciality\">\r\n                    {speciality}\r\n                  </div>\r\n                  <div className=\"doctor-card-detail-experience\">\r\n                    {experience} years experience\r\n                  </div>\r\n                  <div className=\"doctor-card-detail-consultationfees\">\r\n                    Ratings: {ratings}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {appointments.length > 0 ? (\r\n                <>\r\n                  <h3 style={{ textAlign: \"center\" }}>Appointment Booked!</h3>\r\n                  {appointments.map((appointment) => (\r\n                    <div className=\"bookedInfo\" key={appointment.id}>\r\n                      <p>Name: {appointment.name}</p>\r\n                      <p>Phone Number: {appointment.phoneNumber}</p>\r\n                      <p>Date of Appointment: {appointment.date}</p>\r\n                      <p>Time Slot: {appointment.selectedSlot}</p>\r\n                      <button onClick={() => handleCancel(appointment.id)}>\r\n                        Cancel Appointment\r\n                      </button>\r\n                    </div>\r\n                  ))}\r\n                </>\r\n              ) : (\r\n                <AppointmentForm\r\n                  doctorName={name}\r\n                  doctorSpeciality={speciality}\r\n                  onSubmit={handleFormSubmit}\r\n                />\r\n              )}\r\n            </div>\r\n          )}\r\n        </Popup>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DoctorCard;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,eAAe,CACjC,MAAO,8BAA8B,CACrC,MAAO,kBAAkB,CACzB,MAAO,CAAAC,eAAe,KAAM,oCAAoC,CAChE,OAASC,EAAE,GAAI,CAAAC,MAAM,KAAQ,MAAM,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAEpC,KAAM,CAAAC,UAAU,CAAGC,IAAA,EAA+C,IAA9C,CAAEC,IAAI,CAAEC,UAAU,CAAEC,UAAU,CAAEC,OAAQ,CAAC,CAAAJ,IAAA,CAC3D,KAAM,CAACK,SAAS,CAAEC,YAAY,CAAC,CAAGlB,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAACmB,YAAY,CAAEC,eAAe,CAAC,CAAGpB,QAAQ,CAAC,EAAE,CAAC,CACpD,KAAM,CAAAqB,WAAW,CAAGC,cAAc,CAACC,OAAO,CAAC,OAAO,CAAC,CAEnDxB,SAAS,CAAC,IAAM,CACdyB,KAAK,CAAC,oCAAoC,CAAC,CACxCC,IAAI,CAAEC,GAAG,EAAKA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACzBF,IAAI,CAAEG,IAAI,EAAK,CACd,KAAM,CAAAC,kBAAkB,CAAGD,IAAI,CAACE,MAAM,CACnCC,WAAW,EAAKA,WAAW,CAACC,UAAU,GAAKnB,IAC9C,CAAC,CACDO,eAAe,CAACS,kBAAkB,CAAC,CACrC,CAAC,CAAC,CACDI,KAAK,CAAEC,GAAG,EAAKC,OAAO,CAACC,KAAK,CAAC,8BAA8B,CAAEF,GAAG,CAAC,CAAC,CACvE,CAAC,CAAE,CAACrB,IAAI,CAAC,CAAC,CAEV,KAAM,CAAAwB,gBAAgB,CAAIC,eAAe,EAAK,CAC5C,KAAM,CAAAC,cAAc,CAAG,CACrBC,EAAE,CAAEpC,MAAM,CAAC,CAAC,CACZ4B,UAAU,CAAEnB,IAAI,CAChB4B,gBAAgB,CAAE3B,UAAU,CAC5B,GAAGwB,eAAe,CAClBI,KAAK,CAAErB,WACT,CAAC,CAEDG,KAAK,CAAC,oCAAoC,CAAE,CAC1CmB,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACR,cAAc,CACrC,CAAC,CAAC,CACCd,IAAI,CAAEC,GAAG,EAAKA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACzBF,IAAI,CAAC,IAAM,CACVL,eAAe,CAAC,CAAC,GAAGD,YAAY,CAAEoB,cAAc,CAAC,CAAC,CAClDrB,YAAY,CAAC,KAAK,CAAC,CACrB,CAAC,CAAC,CACDe,KAAK,CAAEC,GAAG,EAAKC,OAAO,CAACa,GAAG,CAACd,GAAG,CAAC,CAAC,CACrC,CAAC,CAED,KAAM,CAAAe,YAAY,CAAIC,aAAa,EAAK,CACtC1B,KAAK,CAAC,sCAAsC0B,aAAa,EAAE,CAAE,CAC3DP,MAAM,CAAE,QACV,CAAC,CAAC,CACClB,IAAI,CAAC,IAAM,CACVL,eAAe,CAACD,YAAY,CAACW,MAAM,CAAEqB,CAAC,EAAKA,CAAC,CAACX,EAAE,GAAKU,aAAa,CAAC,CAAC,CACnE5B,cAAc,CAAC8B,UAAU,CAAC,iBAAiB,CAAC,CAC5CC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAC,CAC1B,CAAC,CAAC,CACDtB,KAAK,CAAEC,GAAG,EAAKC,OAAO,CAACa,GAAG,CAACd,GAAG,CAAC,CAAC,CACrC,CAAC,CAED,mBACE1B,KAAA,QAAKgD,SAAS,CAAC,uBAAuB,CAAAC,QAAA,eACpCjD,KAAA,QAAKgD,SAAS,CAAC,+BAA+B,CAAAC,QAAA,eAC5CnD,IAAA,QAAKkD,SAAS,CAAC,qCAAqC,CAAAC,QAAA,cAClDnD,IAAA,QACEoD,KAAK,CAAC,4BAA4B,CAClCC,KAAK,CAAC,IAAI,CACVC,MAAM,CAAC,IAAI,CACXC,IAAI,CAAC,cAAc,CACnBL,SAAS,CAAC,mBAAmB,CAC7BM,OAAO,CAAC,WAAW,CAAAL,QAAA,cAEnBnD,IAAA,SAAMyD,CAAC,CAAC,4EAA4E,CAAE,CAAC,CACpF,CAAC,CACH,CAAC,cACNvD,KAAA,QAAKgD,SAAS,CAAC,qBAAqB,CAAAC,QAAA,eAClCnD,IAAA,QAAKkD,SAAS,CAAC,yBAAyB,CAAAC,QAAA,CAAE5C,IAAI,CAAM,CAAC,cACrDP,IAAA,QAAKkD,SAAS,CAAC,+BAA+B,CAAAC,QAAA,CAAE3C,UAAU,CAAM,CAAC,cACjEN,KAAA,QAAKgD,SAAS,CAAC,+BAA+B,CAAAC,QAAA,EAC3C1C,UAAU,CAAC,mBACd,EAAK,CAAC,cACNP,KAAA,QAAKgD,SAAS,CAAC,qCAAqC,CAAAC,QAAA,EAAC,WAC1C,CAACzC,OAAO,EACd,CAAC,EACH,CAAC,EACH,CAAC,cAENV,IAAA,QAAKkD,SAAS,CAAC,+BAA+B,CAAAC,QAAA,cAC5CnD,IAAA,CAACL,KAAK,EACJ+D,OAAO,cACL1D,IAAA,WACEkD,SAAS,CAAE,wBACTrC,YAAY,CAAC8C,MAAM,CAAG,CAAC,CAAG,oBAAoB,CAAG,EAAE,EAClD,CAAAR,QAAA,CAEFtC,YAAY,CAAC8C,MAAM,CAAG,CAAC,CACpB,oBAAoB,CACpB,kBAAkB,CAChB,CACT,CACDC,KAAK,MACLC,IAAI,CAAElD,SAAU,CAChBmD,OAAO,CAAEA,CAAA,GAAMlD,YAAY,CAAC,KAAK,CAAE,CAAAuC,QAAA,CAEjCY,KAAK,eACL7D,KAAA,QAAKgD,SAAS,CAAC,UAAU,CAACc,KAAK,CAAE,CAAEC,QAAQ,CAAE,QAAS,CAAE,CAAAd,QAAA,eACtDjD,KAAA,QAAAiD,QAAA,eACEnD,IAAA,QAAKkD,SAAS,CAAC,qCAAqC,CAAAC,QAAA,cAClDnD,IAAA,QACEoD,KAAK,CAAC,4BAA4B,CAClCC,KAAK,CAAC,IAAI,CACVC,MAAM,CAAC,IAAI,CACXC,IAAI,CAAC,cAAc,CACnBL,SAAS,CAAC,mBAAmB,CAC7BM,OAAO,CAAC,WAAW,CAAAL,QAAA,cAEnBnD,IAAA,SAAMyD,CAAC,CAAC,4EAA4E,CAAE,CAAC,CACpF,CAAC,CACH,CAAC,cACNvD,KAAA,QAAKgD,SAAS,CAAC,qBAAqB,CAAAC,QAAA,eAClCnD,IAAA,QAAKkD,SAAS,CAAC,yBAAyB,CAAAC,QAAA,CAAE5C,IAAI,CAAM,CAAC,cACrDP,IAAA,QAAKkD,SAAS,CAAC,+BAA+B,CAAAC,QAAA,CAC3C3C,UAAU,CACR,CAAC,cACNN,KAAA,QAAKgD,SAAS,CAAC,+BAA+B,CAAAC,QAAA,EAC3C1C,UAAU,CAAC,mBACd,EAAK,CAAC,cACNP,KAAA,QAAKgD,SAAS,CAAC,qCAAqC,CAAAC,QAAA,EAAC,WAC1C,CAACzC,OAAO,EACd,CAAC,EACH,CAAC,EACH,CAAC,CAELG,YAAY,CAAC8C,MAAM,CAAG,CAAC,cACtBzD,KAAA,CAAAE,SAAA,EAAA+C,QAAA,eACEnD,IAAA,OAAIgE,KAAK,CAAE,CAAEE,SAAS,CAAE,QAAS,CAAE,CAAAf,QAAA,CAAC,qBAAmB,CAAI,CAAC,CAC3DtC,YAAY,CAACsD,GAAG,CAAE1C,WAAW,eAC5BvB,KAAA,QAAKgD,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBjD,KAAA,MAAAiD,QAAA,EAAG,QAAM,CAAC1B,WAAW,CAAClB,IAAI,EAAI,CAAC,cAC/BL,KAAA,MAAAiD,QAAA,EAAG,gBAAc,CAAC1B,WAAW,CAAC2C,WAAW,EAAI,CAAC,cAC9ClE,KAAA,MAAAiD,QAAA,EAAG,uBAAqB,CAAC1B,WAAW,CAAC4C,IAAI,EAAI,CAAC,cAC9CnE,KAAA,MAAAiD,QAAA,EAAG,aAAW,CAAC1B,WAAW,CAAC6C,YAAY,EAAI,CAAC,cAC5CtE,IAAA,WAAQuE,OAAO,CAAEA,CAAA,GAAM5B,YAAY,CAAClB,WAAW,CAACS,EAAE,CAAE,CAAAiB,QAAA,CAAC,oBAErD,CAAQ,CAAC,GAPsB1B,WAAW,CAACS,EAQxC,CACN,CAAC,EACF,CAAC,cAEHlC,IAAA,CAACJ,eAAe,EACd8B,UAAU,CAAEnB,IAAK,CACjB4B,gBAAgB,CAAE3B,UAAW,CAC7BgE,QAAQ,CAAEzC,gBAAiB,CAC5B,CACF,EACE,CACN,CACI,CAAC,CACL,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAA1B,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}