{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import\"./ReviewForm.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ReviewForm=()=>{const[appointments,setAppointments]=useState([]);const[reviews,setReviews]=useState([]);const[selectedAppointment,setSelectedAppointment]=useState(null);const[feedback,setFeedback]=useState(\"\");const[rating,setRating]=useState(0);useEffect(()=>{fetch(\"http://localhost:3001/appointmentsIC\").then(res=>res.json()).then(data=>setAppointments(data.filter(appt=>appt.status!==\"cancelled\"))).catch(err=>console.error(err));fetch(\"http://localhost:3001/reviews\").then(res=>res.json()).then(setReviews).catch(err=>console.error(err));},[]);const handleFeedbackClick=appt=>{setSelectedAppointment(appt);setFeedback(\"\");setRating(0);};const handleSubmitReview=()=>{if(!feedback.trim()||rating===0)return alert(\"Please enter your feedback and rating\");const newReview={appointmentId:selectedAppointment.id,doctorName:selectedAppointment.doctorName,speciality:selectedAppointment.speciality,feedback,rating};fetch(\"http://localhost:3001/reviews\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(newReview)}).then(res=>res.json()).then(data=>{setReviews([...reviews,data]);setSelectedAppointment(null);alert(\"Review submitted successfully!\");}).catch(err=>console.error(err));};const handleStarClick=star=>{setRating(star);};return/*#__PURE__*/_jsxs(\"div\",{className:\"review-form-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Reviews\"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Serial Number\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Doctor Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Doctor Speciality\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Provide Feedback\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:appointments.map((appt,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:index+1}),/*#__PURE__*/_jsx(\"td\",{children:appt.doctorName}),/*#__PURE__*/_jsx(\"td\",{children:appt.speciality}),/*#__PURE__*/_jsx(\"td\",{children:(()=>{const review=reviews.find(r=>r.appointmentId===appt.id);return review?/*#__PURE__*/_jsx(\"span\",{className:\"feedback-content\",children:/*#__PURE__*/_jsxs(\"i\",{children:[review.feedback,\" (\",review.rating,\"\\u2B50)\"]})}):/*#__PURE__*/_jsx(\"button\",{className:\"feedback-btn\",onClick:()=>handleFeedbackClick(appt),children:\"Click Here\"});})()})]},appt.id))})]}),selectedAppointment&&/*#__PURE__*/_jsxs(\"div\",{className:\"feedback-modal\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Provide Feedback for \",selectedAppointment.doctorName]}),/*#__PURE__*/_jsx(\"textarea\",{value:feedback,onChange:e=>setFeedback(e.target.value),placeholder:\"Enter your feedback here...\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"rating-stars\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Rating:\"}),[1,2,3,4,5].map(star=>/*#__PURE__*/_jsx(\"span\",{className:`star ${star<=rating?\"selected\":\"\"}`,onClick:()=>handleStarClick(star),children:\"\\u2605\"},star))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-container\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmitReview,children:\"Submit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedAppointment(null),children:\"Cancel\"})]})]})]});};export default ReviewForm;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","ReviewForm","appointments","setAppointments","reviews","setReviews","selectedAppointment","setSelectedAppointment","feedback","setFeedback","rating","setRating","fetch","then","res","json","data","filter","appt","status","catch","err","console","error","handleFeedbackClick","handleSubmitReview","trim","alert","newReview","appointmentId","id","doctorName","speciality","method","headers","body","JSON","stringify","handleStarClick","star","className","children","map","index","review","find","r","onClick","value","onChange","e","target","placeholder"],"sources":["E:/STUDY/Code/test_app/src/Components/ReviewForm/ReviewForm.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport \"./ReviewForm.css\";\r\n\r\nconst ReviewForm = () => {\r\n  const [appointments, setAppointments] = useState([]);\r\n  const [reviews, setReviews] = useState([]);\r\n  const [selectedAppointment, setSelectedAppointment] = useState(null);\r\n  const [feedback, setFeedback] = useState(\"\");\r\n  const [rating, setRating] = useState(0);\r\n\r\n  useEffect(() => {\r\n    fetch(\"http://localhost:3001/appointmentsIC\")\r\n      .then((res) => res.json())\r\n      .then((data) =>\r\n        setAppointments(data.filter((appt) => appt.status !== \"cancelled\"))\r\n      )\r\n      .catch((err) => console.error(err));\r\n\r\n    fetch(\"http://localhost:3001/reviews\")\r\n      .then((res) => res.json())\r\n      .then(setReviews)\r\n      .catch((err) => console.error(err));\r\n  }, []);\r\n\r\n  const handleFeedbackClick = (appt) => {\r\n    setSelectedAppointment(appt);\r\n    setFeedback(\"\");\r\n    setRating(0);\r\n  };\r\n\r\n  const handleSubmitReview = () => {\r\n    if (!feedback.trim() || rating === 0)\r\n      return alert(\"Please enter your feedback and rating\");\r\n\r\n    const newReview = {\r\n      appointmentId: selectedAppointment.id,\r\n      doctorName: selectedAppointment.doctorName,\r\n      speciality: selectedAppointment.speciality,\r\n      feedback,\r\n      rating,\r\n    };\r\n\r\n    fetch(\"http://localhost:3001/reviews\", {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify(newReview),\r\n    })\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        setReviews([...reviews, data]);\r\n        setSelectedAppointment(null);\r\n        alert(\"Review submitted successfully!\");\r\n      })\r\n      .catch((err) => console.error(err));\r\n  };\r\n\r\n  const handleStarClick = (star) => {\r\n    setRating(star);\r\n  };\r\n\r\n  return (\r\n    <div className=\"review-form-container\">\r\n      <h2>Reviews</h2>\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th>Serial Number</th>\r\n            <th>Doctor Name</th>\r\n            <th>Doctor Speciality</th>\r\n            <th>Provide Feedback</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {appointments.map((appt, index) => (\r\n            <tr key={appt.id}>\r\n              <td>{index + 1}</td>\r\n              <td>{appt.doctorName}</td>\r\n              <td>{appt.speciality}</td>\r\n              <td>\r\n                {(() => {\r\n                  const review = reviews.find(\r\n                    (r) => r.appointmentId === appt.id\r\n                  );\r\n                  return review ? (\r\n                    <span className=\"feedback-content\">\r\n                      <i>\r\n                        {review.feedback} ({review.rating}⭐)\r\n                      </i>\r\n                    </span>\r\n                  ) : (\r\n                    <button\r\n                      className=\"feedback-btn\"\r\n                      onClick={() => handleFeedbackClick(appt)}\r\n                    >\r\n                      Click Here\r\n                    </button>\r\n                  );\r\n                })()}\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n\r\n      {selectedAppointment && (\r\n        <div className=\"feedback-modal\">\r\n          <h3>Provide Feedback for {selectedAppointment.doctorName}</h3>\r\n          <textarea\r\n            value={feedback}\r\n            onChange={(e) => setFeedback(e.target.value)}\r\n            placeholder=\"Enter your feedback here...\"\r\n          ></textarea>\r\n\r\n          <div className=\"rating-stars\">\r\n            <span>Rating:</span>\r\n            {[1, 2, 3, 4, 5].map((star) => (\r\n              <span\r\n                key={star}\r\n                className={`star ${star <= rating ? \"selected\" : \"\"}`}\r\n                onClick={() => handleStarClick(star)}\r\n              >\r\n                ★\r\n              </span>\r\n            ))}\r\n          </div>\r\n\r\n          <div className=\"button-container\">\r\n            <button onClick={handleSubmitReview}>Submit</button>\r\n            <button onClick={() => setSelectedAppointment(null)}>Cancel</button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReviewForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}